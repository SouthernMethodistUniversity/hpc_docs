---

title: "Remote Desktop"
cluster: "m3cluster"
submit: submit.yml.erb

form:
  - custom_queues
  - desktop_os
  - desktop_env
  - bc_num_hours
  - bc_vnc_idle
  - bc_num_cores
  - bc_num_memory
  - bc_vnc_resolution

attributes:
  custom_queues:
    label: "Partition"
    widget: select
    help: |
      Please select the SLURM partition to submit the job to.
    options:
      - ["Development Queue (2 hour limit)", "dev",
        data-max-bc-num-hours: 2,
        data-max-bc-num-cores: 128,
        ]
      - ["HTC Queue (12 hour limit, 1 core)", "htc",
        data-max-bc-num-hours: 12,
        data-max-bc-num-cores: 1,
        ]
      - ["Standard Memory Queue (12 hour limit)", "standard-s",
        data-max-bc-num-hours: 12,
        data-max-bc-num-cores: 128,
        ]
      - ["High Memory Queue (12 hour limit)", "highmem",
        data-max-bc-num-hours: 12,
        data-max-bc-num-cores: 128,
        ]
  desktop_os:
    label: "Operating System"
    widget: select
    help: |
      Please Select Operating System.
      NOTE: AlmaLinux is available to support some legacy applications. Some features of M3 will be unavailable.
    options:
      - ["Ubuntu 22.04", "/hpc/m3/containers/remote_desktop/remote_desktop_1.0.sif",
        data-set-desktop-env: 'mate',
        ]
      - ["AlmaLinux 8", "/hpc/m3/containers/remote_desktop/almalinux_remote_desktop_1.0.0.sif",
        data-set-desktop-env: 'xfce',
        ]
  bc_vnc_idle: 2700
  bc_num_hours:
    label: Time (Hours)
    help: |
      - Number of hours to allocate (maximum 12 hours)
      - Exceeding walltime time will automaticaly stop this job.
    cacheable: true
    widget: number_field
    max: 12
    min: 1
    step: 1
    value: 1
  bc_num_cores:
    label: "Cores per node"
    help: Number of CPU threads
    cacheable: true
    widget: number_field
    max: 128
    min: 1
    value: 1
  bc_num_memory:
    label: "Memory"
    help: "Please select the amount of memory (in GB) you need for your job."
    widget: number_field
    max: 500
    min: 1
    step: 1
    value: 4
  bc_vnc_resolution:
    required: true
  desktop_env:
    widget: hidden_field
