---

#title: "QGIS Client"
cluster: "slurm_cluster"
submit: submit.yml.erb

form:
  #- version
  - environment
  - custom_queue
  - bc_num_hours
  - bc_num_cores
  - bc_num_memory
  - bc_num_gpus
  - bc_vnc_resolution
  - bc_email_on_started
  #- bc_vnc_idle
  #- bc_num_slots

attributes:
  version: "3.16.16"
    #widget: "select"
    #label: "QGIS Version"
    #options:
    #  - [ "3.16.16", "3.16.16" ]
  environment:
    widget: text_area
    label: "Custom Environment Settings"
    help: |
      Set custom environment variables, module paths via `module use
      <path_to_modules>`, and additional modules via `module load
      <space_separated_list_of_modules>`.
  bc_num_hours:
    id: bc_num_hours
    label: Time (Hours)
    help: |
      - Number of hours to allocate
      - Exceeding walltime time will automaticaly stop this job.
    cacheable: true
    widget: number_field
    max: 24
    min: 1
    step: 1
    value: 1
  bc_num_slots:
    id: num_nodes
    value: 1
    #label: Number of nodes
    #help: Number of computer nodes
    #cacheable: true
    #widget: number_field
    #max: 81
    #min: 1
    #step: 1
  bc_num_cores:
    id: num_cpus
    label: "Cores per node"
    help: Number of CPU threads
    cacheable: true
    widget: number_field
    max: 36
    min: 1
    value: 1
  bc_num_gpus:
    id: num_gpus
    label: "GPUs per node"
    cacheable: true
    widget: number_field
    max: 1
    min: 0
    step: 1
    value: 0
  bc_num_memory:
    id: num_mem
    label: "Memory"
    help: "Please select the amount of memory (in GB) you need for your job."
    widget: number_field
    max: 250
    min: 1
    step: 1
    value: 6
  bc_email_on_started:
    value: 0
  bc_vnc_idle:
    value: 0
    #id: vnc_idle
    #label: "Idle Timeout"
    #help: "Please select the amount of time this session may remain idle while maintaining connectivity."
    #widget: number_field
    #max: 12
    #min: 1
    #step: 1
  bc_vnc_resolution:
    required: true
  node_type: null
  custom_queue:
    label: "Partition"
    help: |
      Please select an [M2 SLURM partition] to submit from the drop-down.

      [M2 SLURM partition]: http://faculty.smu.edu/csc/documentation/slurm.html#maneframe-ii-s-slurm-partitions-queues
    widget: select
    options:
      - [ "Regular Desktop Node [Max Time: 12 hours]",         "desktop"         ]
      - [ "VDI Desktop Node [Max Time: 12 hours]",             "desktop-vdi"     ]
      - [ "VDI Development Desktop Node (restricted access) ", "desktop-vdi-dev" ]
#      - [ "development [Max Time: 2 hours]",             "development"    ]
#      - [ "htc [Max Time: 24 hours, Maximum Nodes: 1]",  "htc"            ]
#      - [ "standard-mem-s [Max Time: 24 hours]",         "standard-mem-s" ]
#      - [ "standard-mem-m [Max Time: 7 days]",           "standard-mem-m" ]
#      - [ "standard-mem-l [Max Time: 30 days]",          "standard-mem-l" ]
#      - [ "medium-mem-1-s [Max Time: 24 hours]",         "medium-mem-1-s" ]
#      - [ "medium-mem-1-m [Max Time: 7 days]",           "medium-mem-1-m" ]
#      - [ "medium-mem-1-l [Max Time: 30 days]",          "medium-mem-1-l" ]
#      - [ "medium-mem-2 [Max Time: 14 days]",            "medium-mem-2"   ]
#      - [ "high-mem-1 [Max Time: 14 days]",              "high-mem-1"     ]
#      - [ "high-mem-2 [Max Time: 14 days]",              "high-mem-2"     ]
#      - [ "mic [Max Time: 14 days]",                     "mic"            ]
#      - [ "gpgpu-1 [Max Time: 7 days]",                  "gpgpu-1"        ]
#      - [ "v100x8 [Max Time: 7 days]",                   "v100x8"         ]
#      - [ "*fp-gpgpu-2 [Max Time: UNLIMITED]",           "fp-gpgpu-2"     ]
#      - [ "*fp-gpgpu-3 [Max Time: UNLIMITED]",           "fp-gpgpu-3"     ]
#      - [ "*fp-gpgpu-4 [Max Time: UNLIMITED]",           "fp-gpgpu-4"     ]
      #- [ "admin [Max Time: 24 hours]",    "admin"    ]

